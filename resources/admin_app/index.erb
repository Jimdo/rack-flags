<!DOCTYPE html>
<html>
<head>
  <title>rack-flags admin</title>
  <link href="<%=css_href%>" rel="stylesheet" type="text/css">
</head>
<body>
<h1>rack-flags admin</h1>
<form method="post">
  <%flags.each do |flag|%>
      <section id="<%=flag.name%>" data-flag-name="<%=flag.name%>" class="<%=flag.section_class%>">
        <div class="title">
          <span class="name"><%=flag.name%></span>
          <span class="description"><%=flag.description%></span>
        </div>
        <div class="state">
          <label>
            <input type="radio" name="<%=flag.name%>" value="on" onclick="choose('<%=flag.name%>');" <%=flag.checked_attribute_for(:on)%>/>
            <span>On <%=flag.default_icon_for(:on) %></span>
          </label>

          <label>
            <input type="radio" name="<%=flag.name%>" value="off" onclick="choose('<%=flag.name%>');" <%=flag.checked_attribute_for(:off)%>/>
            <span>Off <%=flag.default_icon_for(:off) %></span>
          </label>
        </div>
      </section>
  <%end%>
  <input type="submit" value="Update Flags"/>
</form>

<script type="text/javascript">
  function choose(flag_name) {
      var section = document.getElementById(flag_name);
      var css_class = section.className;

      if(css_class == "override") {
          section.className = "";
      }
      else {
          section.className = "override";
      }
  }
</script>
</body>
</html>